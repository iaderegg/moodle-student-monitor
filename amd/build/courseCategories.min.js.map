{"version":3,"sources":["../src/courseCategories.js"],"names":["define","$","ajax","templates","createTable","idNumberCourseCategory","courses","html","DataTable","init","document","ready","on","categoryCourseId","attr","split","courseCategoryIdNumber","promiseCreateAcademicPeriod","call","methodname","args","done","response","error","courseCategories","JSON","parse","course_categories","length","context","hasCourses","render","then","js","appendNodeContents","fail","ex","console","log"],"mappings":"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","sourcesContent":["/*eslint no-unused-vars: [\"error\", { \"args\": \"none\" }]*/\ndefine(['jquery',\n    'core/ajax',\n    'core/templates',\n    'report_studentmonitor/jszip',\n    'report_studentmonitor/pdfmake',\n    'report_studentmonitor/jquery.dataTables',\n    'report_studentmonitor/dataTables.bootstrap4',\n    'report_studentmonitor/autoFill.bootstrap4',\n    'report_studentmonitor/dataTables.buttons',\n    'report_studentmonitor/buttons.bootstrap4',\n    'report_studentmonitor/buttons.colVis',\n    'report_studentmonitor/buttons.html5',\n    'report_studentmonitor/buttons.print'\n    // 'report_studentmonitor/sweetalert',\n], function ($,\n    ajax,\n    templates,\n    jszip,\n    pdfmake,\n    dataTable,\n    bootstrapDataTables,\n    autoFill,\n    buttonsDatatables,\n    buttonsBootstrap,\n    buttonscolVis,\n    buttonsHtml5,\n    buttonsPrint\n    //Swal\n) {\n\n    function createTable(idNumberCourseCategory, courses) {\n\n        $('#table-courses-' + idNumberCourseCategory).html('');\n\n        $('#table-courses-' + idNumberCourseCategory).DataTable({\n            \"destroy\": true,\n            \"columns\": [{\n                    \"title\": \"Nombre\",\n                    \"data\": \"fullname\"\n                },\n                {\n                    \"title\": \"Estudiantes\",\n                    \"data\": \"students\"\n                },\n                {\n                    \"title\": \"Profesores\",\n                    \"data\": \"professors\"\n                },\n                {\n                    \"title\": \"Opciones\",\n                    \"data\": \"options\"\n                }\n            ],\n            \"data\": courses,\n            \"dom\": 'Bfrt',\n            \"language\": {\n                \"url\": \"assets/datatables/Spanish.json\",\n            },\n            \"order\": [\n                [0, \"desc\"]\n            ],\n            \"columnDefs\": [\n            {\n                \"targets\": [1, 2],\n                \"searchable\": false,\n                \"className\": \"text-center\"\n            },\n            {\n                \"targets\": 3,\n                \"searchable\": false,\n                \"orderable\": false,\n                \"className\": \"text-center\"\n            }],\n            \"buttons\": [\n                {\n                    \"extend\": \"copyHtml5\",\n                    \"exportOptions\": {\n                        \"columns\": [0, 1, 2]\n                    }\n                },\n                {\n                    \"extend\": \"csv\",\n                    \"exportOptions\": {\n                        \"columns\": [0, 1, 2]\n                    }\n                },\n                {\n                    \"extend\": \"print\",\n                    \"exportOptions\": {\n                        \"columns\": [0, 1, 2]\n                    }\n                }\n            ]\n        });\n    }\n\n    return {\n        init: function () {\n            $(document).ready(function () {\n\n                $('#accordion').on('click', '.category-button', function () {\n                    /* eslint no-console: [\"error\", { allow: [\"log\", \"error\"] }] */\n                    var categoryCourseId = $(this).attr('id').split('-')[1];\n                    var courseCategoryIdNumber = $(this).attr('data-target').split('-')[2];\n\n                    var promiseCreateAcademicPeriod = ajax.call([{\n                        methodname: 'report_studentmonitor_get_course_categories',\n                        args: {\n                            categoryCourseId: categoryCourseId,\n                        }\n                    }]);\n\n                    promiseCreateAcademicPeriod[0].done(function (response) {\n                        if (!response.error) {\n\n                            var courseCategories = JSON.parse(response.course_categories);\n                            var courses = JSON.parse(response.courses);\n\n                            if (courseCategories.length > 0) {\n\n                                if (courses.length > 0) {\n                                    var context = {\n                                        courseCategories: courseCategories,\n                                        courseCategoryIdNumber: courseCategoryIdNumber,\n                                        hasCourses: 1\n                                    };\n                                } else {\n                                    var context = {\n                                        courseCategories: courseCategories,\n                                        courseCategoryIdNumber: courseCategoryIdNumber\n                                    };\n                                }\n                            }else{\n                                if (courses.length > 0) {\n                                    var context = {\n                                        courseCategoryIdNumber: courseCategoryIdNumber,\n                                        hasCourses: 1\n                                    };\n                                }else{\n                                    var context = {\n                                        courseCategoryIdNumber: courseCategoryIdNumber\n                                    };\n                                }\n                            }\n\n                            templates.render('report_studentmonitor/child_categories', context)\n                                .then(function (html, js) {\n                                    $('#card-body-' + courseCategoryIdNumber).html('');\n                                    templates.appendNodeContents('#card-body-' + courseCategoryIdNumber, html, js);\n\n                                    if (courses.length > 0) {\n                                        $('#id-' + courseCategoryIdNumber).on('click', function () {\n                                            createTable(courseCategoryIdNumber, courses);\n                                        });\n                                    }\n\n                                    if (courseCategories.length == 0) {\n                                        createTable(courseCategoryIdNumber, courses);\n                                    }\n\n                                }).fail(function (ex) {\n                                    console.log(ex);\n                                });\n                        }\n                    });\n\n                });\n            });\n        }\n    };\n});"],"file":"courseCategories.min.js"}