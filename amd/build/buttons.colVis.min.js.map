{"version":3,"sources":["../src/buttons.colVis.js"],"names":["factory","define","amd","$","window","document","exports","module","root","fn","dataTable","require","Buttons","jQuery","DataTable","extend","ext","buttons","colvis","dt","conf","text","i18n","className","columns","columnText","columnsToggle","indexes","map","idx","toArray","columnToggle","columnsVisibility","visibility","columnVisibility","button","_columnText","action","e","col","curr","visible","length","init","that","attr","on","namespace","settings","bDestroying","nTable","active","column","count","destroy","off","index","title","aoColumns","sTitle","header","innerHTML","replace","colvisRestore","_visOriginal","every","i","colReorder","transpose","colvisGroup","show","hide","adjust"],"mappings":"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","sourcesContent":["/*!\n * Column visibility buttons for Buttons and DataTables.\n * 2016 SpryMedia Ltd - datatables.net/license\n */\n\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'report_studentmonitor/jquery.dataTables', 'report_studentmonitor/dataTables.buttons'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tmodule.exports = function (root, $) {\n\t\t\tif ( ! root ) {\n\t\t\t\troot = window;\n\t\t\t}\n\n\t\t\tif ( ! $ || ! $.fn.dataTable ) {\n\t\t\t\t$ = require('report_studentmonitor/jquery.dataTables')(root, $).$;\n\t\t\t}\n\n\t\t\tif ( ! $.fn.dataTable.Buttons ) {\n\t\t\t\trequire('report_studentmonitor/dataTables.buttons')(root, $);\n\t\t\t}\n\n\t\t\treturn factory( $, root, root.document );\n\t\t};\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document, undefined ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n$.extend( DataTable.ext.buttons, {\n\t// A collection of column visibility buttons\n\tcolvis: function ( dt, conf ) {\n\t\treturn {\n\t\t\textend: 'collection',\n\t\t\ttext: function ( dt ) {\n\t\t\t\treturn dt.i18n( 'buttons.colvis', 'Column visibility' );\n\t\t\t},\n\t\t\tclassName: 'buttons-colvis',\n\t\t\tbuttons: [ {\n\t\t\t\textend: 'columnsToggle',\n\t\t\t\tcolumns: conf.columns,\n\t\t\t\tcolumnText: conf.columnText\n\t\t\t} ]\n\t\t};\n\t},\n\n\t// Selected columns with individual buttons - toggle column visibility\n\tcolumnsToggle: function ( dt, conf ) {\n\t\tvar columns = dt.columns( conf.columns ).indexes().map( function ( idx ) {\n\t\t\treturn {\n\t\t\t\textend: 'columnToggle',\n\t\t\t\tcolumns: idx,\n\t\t\t\tcolumnText: conf.columnText\n\t\t\t};\n\t\t} ).toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to toggle column visibility\n\tcolumnToggle: function ( dt, conf ) {\n\t\treturn {\n\t\t\textend: 'columnVisibility',\n\t\t\tcolumns: conf.columns,\n\t\t\tcolumnText: conf.columnText\n\t\t};\n\t},\n\n\t// Selected columns with individual buttons - set column visibility\n\tcolumnsVisibility: function ( dt, conf ) {\n\t\tvar columns = dt.columns( conf.columns ).indexes().map( function ( idx ) {\n\t\t\treturn {\n\t\t\t\textend: 'columnVisibility',\n\t\t\t\tcolumns: idx,\n\t\t\t\tvisibility: conf.visibility,\n\t\t\t\tcolumnText: conf.columnText\n\t\t\t};\n\t\t} ).toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to set column visibility\n\tcolumnVisibility: {\n\t\tcolumns: undefined, // column selector\n\t\ttext: function ( dt, button, conf ) {\n\t\t\treturn conf._columnText( dt, conf );\n\t\t},\n\t\tclassName: 'buttons-columnVisibility',\n\t\taction: function ( e, dt, button, conf ) {\n\t\t\tvar col = dt.columns( conf.columns );\n\t\t\tvar curr = col.visible();\n\n\t\t\tcol.visible( conf.visibility !== undefined ?\n\t\t\t\tconf.visibility :\n\t\t\t\t! (curr.length ? curr[0] : false )\n\t\t\t);\n\t\t},\n\t\tinit: function ( dt, button, conf ) {\n\t\t\tvar that = this;\n\t\t\tbutton.attr( 'data-cv-idx', conf.columns );\n\n\t\t\tdt\n\t\t\t\t.on( 'column-visibility.dt'+conf.namespace, function (e, settings) {\n\t\t\t\t\tif ( ! settings.bDestroying && settings.nTable == dt.settings()[0].nTable ) {\n\t\t\t\t\t\tthat.active( dt.column( conf.columns ).visible() );\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.on( 'column-reorder.dt'+conf.namespace, function (e, settings, details) {\n\t\t\t\t\tif ( dt.columns( conf.columns ).count() !== 1 ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// This button controls the same column index but the text for the column has\n\t\t\t\t\t// changed\n\t\t\t\t\tthat.text( conf._columnText( dt, conf ) );\n\n\t\t\t\t\t// Since its a different column, we need to check its visibility\n\t\t\t\t\tthat.active( dt.column( conf.columns ).visible() );\n\t\t\t\t} );\n\n\t\t\tthis.active( dt.column( conf.columns ).visible() );\n\t\t},\n\t\tdestroy: function ( dt, button, conf ) {\n\t\t\tdt\n\t\t\t\t.off( 'column-visibility.dt'+conf.namespace )\n\t\t\t\t.off( 'column-reorder.dt'+conf.namespace );\n\t\t},\n\n\t\t_columnText: function ( dt, conf ) {\n\t\t\t// Use DataTables' internal data structure until this is presented\n\t\t\t// is a public API. The other option is to use\n\t\t\t// `$( column(col).node() ).text()` but the node might not have been\n\t\t\t// populated when Buttons is constructed.\n\t\t\tvar idx = dt.column( conf.columns ).index();\n\t\t\tvar title = dt.settings()[0].aoColumns[ idx ].sTitle;\n\n\t\t\tif (! title) {\n\t\t\t\ttitle = dt.column(idx).header().innerHTML;\n\t\t\t}\n\n\t\t\ttitle = title\n\t\t\t\t.replace(/\\n/g,\" \")        // remove new lines\n\t\t\t\t.replace(/<br\\s*\\/?>/gi, \" \")  // replace line breaks with spaces\n\t\t\t\t.replace(/<select(.*?)<\\/select>/g, \"\") // remove select tags, including options text\n\t\t\t\t.replace(/<!\\-\\-.*?\\-\\->/g, \"\") // strip HTML comments\n\t\t\t\t.replace(/<.*?>/g, \"\")   // strip HTML\n\t\t\t\t.replace(/^\\s+|\\s+$/g,\"\"); // trim\n\n\t\t\treturn conf.columnText ?\n\t\t\t\tconf.columnText( dt, idx, title ) :\n\t\t\t\ttitle;\n\t\t}\n\t},\n\n\n\tcolvisRestore: {\n\t\tclassName: 'buttons-colvisRestore',\n\n\t\ttext: function ( dt ) {\n\t\t\treturn dt.i18n( 'buttons.colvisRestore', 'Restore visibility' );\n\t\t},\n\n\t\tinit: function ( dt, button, conf ) {\n\t\t\tconf._visOriginal = dt.columns().indexes().map( function ( idx ) {\n\t\t\t\treturn dt.column( idx ).visible();\n\t\t\t} ).toArray();\n\t\t},\n\n\t\taction: function ( e, dt, button, conf ) {\n\t\t\tdt.columns().every( function ( i ) {\n\t\t\t\t// Take into account that ColReorder might have disrupted our\n\t\t\t\t// indexes\n\t\t\t\tvar idx = dt.colReorder && dt.colReorder.transpose ?\n\t\t\t\t\tdt.colReorder.transpose( i, 'toOriginal' ) :\n\t\t\t\t\ti;\n\n\t\t\t\tthis.visible( conf._visOriginal[ idx ] );\n\t\t\t} );\n\t\t}\n\t},\n\n\n\tcolvisGroup: {\n\t\tclassName: 'buttons-colvisGroup',\n\n\t\taction: function ( e, dt, button, conf ) {\n\t\t\tdt.columns( conf.show ).visible( true, false );\n\t\t\tdt.columns( conf.hide ).visible( false, false );\n\n\t\t\tdt.columns.adjust();\n\t\t},\n\n\t\tshow: [],\n\n\t\thide: []\n\t}\n} );\n\n\nreturn DataTable.Buttons;\n}));\n"],"file":"buttons.colVis.min.js"}